<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
  <title>×§×‘×•×¦×•×ª ×¨×›×™×©×” ×•×¢×¡×§××•×ª ××›×¨ ×‘× ×™×”×•×œ ×”××©×¨×“ - ××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  
  <!-- Hebrew Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 20px;
      font-family: 'Heebo', Arial, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }
    
    .map-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      padding: 30px;
      position: relative;
    }
    
    .map-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .map-title {
      font-size: 32px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 10px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .map-subtitle {
      font-size: 16px;
      color: #7f8c8d;
      font-weight: 400;
    }
    
    #map {
      height: 600px;
      width: 100%;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      border: 3px solid #fff;
    }
    
    .popup-content {
      direction: rtl;
      font-family: 'Heebo', Arial, sans-serif;
      text-align: right;
      padding: 15px;
      max-width: 250px;
    }
    
    .popup-city {
      font-size: 18px;
      font-weight: 600;
      color: #2563eb;
      margin-bottom: 8px;
      padding-bottom: 8px;
      border-bottom: 2px solid #e3f2fd;
    }
    
    .popup-info {
      font-size: 14px;
      color: #555;
      line-height: 1.5;
      margin-bottom: 12px;
    }
    
    .popup-contact {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      color: white;
      padding: 8px 15px;
      border-radius: 20px;
      text-align: center;
      font-size: 12px;
      font-weight: 500;
      margin-top: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .popup-contact:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.4);
    }
    
    .page-logo {
      position: absolute;
      top: 20px;
      left: 20px;
      background: white;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 1001;
    }
    
    .page-logo img {
      height: 50px;
      width: auto;
    }
    
    .map-legend {
      position: absolute;
      top: 20px;
      right: 20px;
      background: white;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 1000;
      font-family: 'Heebo', Arial, sans-serif;
      direction: rtl;
    }
    
    .legend-title {
      font-weight: 600;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
    }
    
    .legend-marker {
      width: 12px;
      height: 12px;
      border-radius: 50% 50% 50% 0;
      transform: rotate(-45deg);
      margin-left: 10px;
      border: 1px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    
    .legend-marker.red {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    }
    
    .legend-marker.blue {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
    }
    
    /* Custom popup styling */
    .leaflet-popup-content-wrapper {
      border-radius: 12px !important;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
    }
    
    .leaflet-popup-content {
      margin: 0 !important;
    }
    
    .leaflet-popup-tip {
      box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
    }
    
    .hover-popup .leaflet-popup-content-wrapper {
      background: white;
      color: #333;
      font-family: 'Heebo', Arial, sans-serif;
      direction: rtl;
    }
    
    /* Marker hover effects */
    .custom-marker-red,
    .custom-marker-blue {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .leaflet-popup-content-wrapper {
      border-radius: 12px !important;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
    }
    
    .leaflet-popup-tip {
      box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
    }
    
    /* Custom marker styling */
    .custom-marker-red {
      background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
      border: 2px solid white;
      border-radius: 50% 50% 50% 0;
      box-shadow: 0 3px 10px rgba(220, 38, 38, 0.4);
      width: 18px;
      height: 18px;
      transform: rotate(-45deg);
      position: relative;
    }
    
    .custom-marker-red:after {
      content: '';
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
    }
    
    .custom-marker-blue {
      background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
      border: 2px solid white;
      border-radius: 50% 50% 50% 0;
      box-shadow: 0 3px 10px rgba(37, 99, 235, 0.4);
      width: 18px;
      height: 18px;
      transform: rotate(-45deg);
      position: relative;
    }
    
    .custom-marker-blue:after {
      content: '';
      width: 6px;
      height: 6px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
    }
    
    .leaflet-tooltip {
      background: rgba(37, 99, 235, 0.95) !important;
      border: none !important;
      border-radius: 8px !important;
      color: white !important;
      font-family: 'Heebo', Arial, sans-serif !important;
      font-weight: 500 !important;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2) !important;
    }
    
    .leaflet-tooltip-top:before {
      border-top-color: rgba(37, 99, 235, 0.95) !important;
    }
    
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
      
      .map-container {
        padding: 20px;
      }
      
      #map {
        height: 400px;
      }
      
      .map-title {
        font-size: 24px;
      }
      
      .map-legend {
        top: 10px;
        right: 10px;
        padding: 10px;
        font-size: 12px;
      }
      
      .legend-item {
        margin-bottom: 5px;
      }
      
      .page-logo {
        top: 10px;
        left: 10px;
        padding: 8px;
      }
      
      .page-logo img {
        height: 35px;
      }
    }
  </style>
</head>
<body>
  <div class="map-container">
    <div class="map-header">
      <h1 class="map-title">×§×‘×•×¦×•×ª ×¨×›×™×©×” ×•×¢×¡×§××•×ª ××›×¨ ×‘× ×™×”×•×œ ×”××©×¨×“</h1>
      <p class="map-subtitle">×¤×¨×•×™×§×˜×™ × ×“×œ"×Ÿ ×‘×œ×™×•×•×™ ××©×¤×˜×™ ×©×œ ××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥</p>
    </div>
    
    <div class="page-logo">
      <img src="https://dvoranitlaw.com/wp-content/uploads/2024/12/×œ×•×’×•-×“×‘×•×¨× ×™×ª-06.png" alt="×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥ - ×¢×•×¨×›×ª ×“×™×Ÿ">
    </div>
    
    <div id="map"></div>
    
    <div class="map-legend">
      <div class="legend-title">××§×¨×</div>
      <div class="legend-item">
        <div class="legend-marker red"></div>
        <span>×§×‘×•×¦×ª ×¨×›×™×©×”</span>
      </div>
      <div class="legend-item">
        <div class="legend-marker blue"></div>
        <span>×¢×¡×§×ª ××›×¨</span>
      </div>
    </div>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    // Initialize map
    var map = L.map('map').fitBounds([[29.4, 34.2], [33.5, 35.9]]);
    map.setMaxBounds([[29.4, 34.2], [33.5, 35.9]]);
    map.setMinZoom(7);
    
    // Custom tile layer for better professional look
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Â© OpenStreetMap contributors',
      maxZoom: 18
    }).addTo(map);
    
    // Project data from Excel file
    const projects = [
      // ×§×‘×•×¦×ª ×¨×›×™×©×” (Red arrows)
      { 
        city: "×§×¨×™×™×ª ×©××•× ×”", 
        lat: 33.2103, 
        lng: 35.5661, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×¤×¨×•×™×§×˜ ××—×“, 18 ×™×—\"×“"
      },
      { 
        city: "×‘×™×ª ×©××©", 
        lat: 31.7497, 
        lng: 34.9846, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×¤×¨×•×™×§×˜ ××—×“, 50 ×™×—\"×“"
      },
      { 
        city: "××•×“×™×¢×™×Ÿ ×¢×™×œ×™×ª", 
        lat: 31.9302, 
        lng: 35.0364, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×¤×¨×•×™×§×˜ ××—×“, 150 ×™×—\"×“"
      },
      { 
        city: "×¢×¨×“", 
        lat: 31.2589, 
        lng: 35.2123, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×©× ×™ ×¤×¨×•×™×§×˜×™×, 62 ×™×—\"×“"
      },
      { 
        city: "××¦×¤×” ×¨××•×Ÿ", 
        lat: 30.6093, 
        lng: 34.801, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×©× ×™ ×¤×¨×•×™×§×˜×™×, 80 ×™×—\"×“"
      },
      { 
        city: "××•×¤×§×™×", 
        lat: 31.3148, 
        lng: 34.6204, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×¤×¨×•×™×§×˜ ××—×“, 48 ×™×—\"×“"
      },
      { 
        city: "×¢×¤×¨×™×", 
        lat: 32.0195, 
        lng: 35.0418, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×¤×¨×•×™×§×˜ ××—×“, 159 ×™×—\"×“"
      },
      { 
        city: "×¦×¤×ª", 
        lat: 32.9667, 
        lng: 35.495, 
        type: "×§×‘×•×¦×ª ×¨×›×™×©×”",
        info: "×©×œ×•×©×” ×¤×¨×•×™×§×˜×™×, 34 ×™×—\"×“"
      },
      
      // ×¢×¡×§×ª ××›×¨ (Blue arrows)
      { 
        city: "× ×•×•×” ×“× ×™××œ", 
        lat: 31.6559, 
        lng: 35.1395, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×’×‘×¢×ª ×©××•××œ", 
        lat: 32.0777, 
        lng: 34.8529, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×¤×¨×“×¡ ×—× ×”", 
        lat: 32.4701, 
        lng: 34.9239, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×œ×©×", 
        lat: 33.2058, 
        lng: 35.6561, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×“×•×œ×‘", 
        lat: 31.7894, 
        lng: 35.1167, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "××¤×¨×ª", 
        lat: 31.6516, 
        lng: 35.1347, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×ª×§×•×¢", 
        lat: 31.6353, 
        lng: 35.1786, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×¢×œ×™", 
        lat: 31.7439, 
        lng: 35.1578, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×§×¨×™×™×ª ×’×ª", 
        lat: 31.6103, 
        lng: 34.7642, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "× ×ª× ×™×”", 
        lat: 32.3215, 
        lng: 34.8532, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×‘×™×ª ×©××©", 
        lat: 31.7350, 
        lng: 34.9950, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      },
      { 
        city: "×™×¨×•×©×œ×™×", 
        lat: 31.7683, 
        lng: 35.2137, 
        type: "×¢×¡×§×ª ××›×¨",
        info: "×¢×¡×§×ª × ×“×œ\"×Ÿ ×¤×¨×˜×™×ª"
      }
    ];

    // Custom icon function
    function createCustomIcon(type) {
      const className = type === "×§×‘×•×¦×ª ×¨×›×™×©×”" ? "custom-marker-red" : "custom-marker-blue";
      return L.divIcon({
        className: 'custom-div-icon',
        html: `<div class="${className}"></div>`,
        iconSize: [18, 18],
        iconAnchor: [9, 17]
      });
    }
    
    // Add markers with hover effects
    projects.forEach((p, index) => {
      const typeIcon = p.type === "×§×‘×•×¦×ª ×¨×›×™×©×”" ? "ğŸ˜ï¸" : "ğŸ ";
      const typeClass = p.type === "×§×‘×•×¦×ª ×¨×›×™×©×”" ? "red" : "blue";
      
      const marker = L.marker([p.lat, p.lng], {
        icon: createCustomIcon(p.type)
      }).addTo(map);
      
      // Create popup content
      const popupContent = `
        <div style="direction: rtl; font-family: 'Heebo', Arial, sans-serif; text-align: right; padding: 10px; min-width: 200px;">
          <div style="font-size: 16px; font-weight: 600; color: #2563eb; margin-bottom: 8px; padding-bottom: 5px; border-bottom: 1px solid #e3f2fd;">
            ${p.city}
          </div>
          <div style="background: ${typeClass === 'red' ? '#dc2626' : '#2563eb'}; color: white; padding: 4px 8px; border-radius: 12px; margin-bottom: 8px; text-align: center; font-weight: 600; font-size: 12px;">
            ${typeIcon} ${p.type}
          </div>
          <div style="font-size: 13px; color: #555; line-height: 1.4; margin-bottom: 10px;">
            ${p.info}
          </div>
          <div style="background: #2563eb; color: white; padding: 6px 12px; border-radius: 15px; text-align: center; font-size: 11px; font-weight: 500; cursor: pointer;" onclick="contactLawyer('${p.city}', '${p.type}')">
            âœ‰ï¸ ×©×œ×™×—×ª ××™×™×œ ×œ×¤×¨×˜×™× × ×•×¡×¤×™×
          </div>
        </div>
      `;
      
      // Bind popup
      marker.bindPopup(popupContent, {
        closeButton: false,
        autoClose: false,
        closeOnEscapeKey: true,
        className: 'hover-popup',
        offset: [0, -10]
      });
      
      // Show popup on hover
      marker.on('mouseover', function(e) {
        this.openPopup();
      });
      
      // Close popup when mouse leaves the marker
      marker.on('mouseout', function(e) {
        // Small delay to allow moving to popup
        setTimeout(() => {
          // Only close if mouse is not over the popup
          if (!document.querySelector('.leaflet-popup:hover')) {
            this.closePopup();
          }
        }, 200);
      });
      
      // Also show on click for mobile
      marker.on('click', function(e) {
        e.originalEvent.stopPropagation();
        this.openPopup();
      });
    });
    
    // Contact function
    function contactLawyer() {
      // Create simple email subject
      const subject = encodeURIComponent('×¤×¨×˜×™× × ×•×¡×¤×™× ×¢×œ ×©×™×¨×•×ª×™ ×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥ ××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ');
      
      // Open email client with only subject line
      window.location.href = `mailto:office@dvoranitlaw.com?subject=${subject}`;
    }
    
    // Handle popup hover to keep it open
    map.on('popupopen', function(e) {
      const popup = e.popup;
      const popupElement = popup._container;
      
      if (popupElement) {
        // Keep popup open when hovering over it
        popupElement.addEventListener('mouseenter', function() {
          // Cancel any pending close
        });
        
        // Close when leaving popup
        popupElement.addEventListener('mouseleave', function() {
          setTimeout(() => {
            popup._source.closePopup();
          }, 100);
        });
      }
    });
    
    // Close all popups when clicking on map background
    map.on('click', function(e) {
      map.closePopup();
    });
    
    // Add attribution
    map.attributionControl.addAttribution('× ×ª×•× ×™× ××¢×•×“×›× ×™× - ××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥');
    
    // Add attribution
    map.attributionControl.addAttribution('× ×ª×•× ×™× ××¢×•×“×›× ×™× - ××©×¨×“ ×¢×•×¨×›×™ ×“×™×Ÿ ×“×‘×•×¨× ×™×ª ×©×•×•×¨×¥');
  </script>
</body>
</html>